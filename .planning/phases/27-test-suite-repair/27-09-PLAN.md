---
phase: 27-test-suite-repair
plan: 09
type: execute
wave: 1
depends_on: []
files_modified:
  - internal/store/postgres/chat_store_mock_test.go
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "internal/store/postgres package compiles without errors"
    - "No unused variable warnings"
  artifacts:
    - path: "internal/store/postgres/chat_store_mock_test.go"
      provides: "Chat store tests without unused variables"
  key_links:
    - from: "internal/store/postgres/chat_store_mock_test.go"
      to: "internal/store/postgres/user_store_mock_test.go"
      via: "setupMockDB helper"
      pattern: "setupMockDB"
---

<objective>
Fix internal/store/postgres package test compilation by using or removing unused variables.

Purpose: chat_store_mock_test.go declares db and ctx variables that are never used, causing compilation errors.
Output: Compilable internal postgres store tests.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@internal/store/postgres/chat_store_mock_test.go
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix unused variables in chat_store_mock_test.go</name>
  <files>internal/store/postgres/chat_store_mock_test.go</files>
  <action>
The test file calls setupMockDB(t) which returns (db, mock, cleanup), but only mock and cleanup are used. The db and ctx variables are declared but never used.

Pattern in the file:
```go
db, mock, cleanup := setupMockDB(t)
defer cleanup()

ctx := context.Background()
// ... mock expectations set up ...
// But db and ctx are never actually used in the test body
```

These tests appear to be INCOMPLETE - they set up expectations but don't call any actual store methods.

**Option A: Use blank identifiers for unused variables**
```go
_, mock, cleanup := setupMockDB(t)
defer cleanup()

_ = context.Background()  // or just remove if not needed
```

**Option B: Add TODO comments and implement tests properly later**
The tests have comments like "// Would test successful group creation" but no actual assertions.

For gap closure, use Option A (blank identifiers) since the goal is compilation:

1. Line 44: Change `db, mock, cleanup := setupMockDB(t)` to `_, mock, cleanup := setupMockDB(t)`
2. Line 47: Change `ctx := context.Background()` to `_ = context.Background()` OR remove if truly unused

Apply this pattern to all occurrences:
- Lines 44, 47 (TestChatStore_CreateChatGroup)
- Lines 82, 85 (TestChatStore_GetChatGroup)
- Lines 112, 115 (TestChatStore_UpdateChatGroup)
- Lines 144, 147 (TestChatStore_DeleteChatGroup)
- Lines 187, 190 (TestChatStore_ListChatGroupsByTrip)
- And any other similar patterns in the file

The error output showed 10+ "declared and not used" errors, so apply this fix throughout the file.
  </action>
  <verify>go test -c ./internal/store/postgres/... compiles without "declared and not used" errors</verify>
  <done>internal/store/postgres package compiles without unused variable errors</done>
</task>

</tasks>

<verification>
```bash
# Verify internal/store/postgres package compiles
go test -c ./internal/store/postgres/...

# Run tests
go test -v ./internal/store/postgres/...
```
</verification>

<success_criteria>
- internal/store/postgres package compiles: `go test -c ./internal/store/postgres/...` exits 0
- No "declared and not used" errors for db or ctx variables
</success_criteria>

<output>
After completion, create `.planning/phases/27-test-suite-repair/27-09-SUMMARY.md`
</output>
