---
phase: 27-test-suite-repair
plan: 06
type: execute
wave: 1
depends_on: []
files_modified:
  - middleware/jwt_validator_test.go
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "middleware package compiles without errors"
    - "TestJWTValidator implements Validator interface correctly"
  artifacts:
    - path: "middleware/jwt_validator_test.go"
      provides: "JWT validator tests with types import"
  key_links:
    - from: "middleware/jwt_validator_test.go"
      to: "github.com/NomadCrew/nomad-crew-backend/types"
      via: "import statement"
      pattern: "types\\.JWTClaims"
---

<objective>
Fix middleware package test compilation by adding missing types import.

Purpose: jwt_validator_test.go references types.JWTClaims but is missing the types package import.
Output: Compilable middleware tests.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@middleware/jwt_validator_test.go
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add types import to jwt_validator_test.go</name>
  <files>middleware/jwt_validator_test.go</files>
  <action>
Add missing import to the import block:

```go
import (
    ...existing imports...
    "github.com/NomadCrew/nomad-crew-backend/types"  // Add this line
)
```

The file already uses types.JWTClaims at lines 71 and 77:
- Line 71: `func (m *TestJWTValidator) ValidateAndGetClaims(tokenString string) (*types.JWTClaims, error)`
- Line 77: `return &types.JWTClaims{UserID: userID}, nil`

Simply add the import to resolve the undefined: types errors.
  </action>
  <verify>go test -c ./middleware/... compiles without errors</verify>
  <done>middleware package compiles without "undefined: types" errors</done>
</task>

</tasks>

<verification>
```bash
# Verify middleware package compiles
go test -c ./middleware/...

# Run middleware tests
go test -v ./middleware/...
```
</verification>

<success_criteria>
- middleware package compiles: `go test -c ./middleware/...` exits 0
- No "undefined: types" errors
</success_criteria>

<output>
After completion, create `.planning/phases/27-test-suite-repair/27-06-SUMMARY.md`
</output>
