basePath: /v1
definitions:
  handlers.AcceptInvitationRequest:
    properties:
      token:
        type: string
    required:
    - token
    type: object
  handlers.DeclineInvitationRequest:
    properties:
      token:
        type: string
    required:
    - token
    type: object
  handlers.InviteMemberRequest:
    properties:
      email:
        type: string
      role:
        $ref: '#/definitions/types.MemberRole'
    required:
    - email
    - role
    type: object
  types.AddMemberRequest:
    description: Request body for adding a member to a trip.
    properties:
      role:
        example: MEMBER
        type: string
      userId:
        example: user-uuid-abc
        type: string
    required:
    - role
    - userId
    type: object
  types.ChatAddReactionRequest:
    properties:
      emoji:
        maxLength: 10
        type: string
    required:
    - emoji
    type: object
  types.ChatGetMessagesResponse:
    properties:
      messages:
        items: {}
        type: array
      pagination:
        $ref: '#/definitions/types.ChatPaginationInfo'
    type: object
  types.ChatPaginationInfo:
    properties:
      before:
        type: string
      has_more:
        type: boolean
      limit:
        type: integer
      next_cursor:
        type: string
    type: object
  types.ChatReactionResponse:
    properties:
      emoji:
        type: string
      messageId:
        type: string
      userId:
        type: string
    type: object
  types.ChatSendMessageRequest:
    properties:
      message:
        maxLength: 1000
        minLength: 1
        type: string
      replyToId:
        type: string
    required:
    - message
    type: object
  types.ChatSendMessageResponse:
    properties:
      createdAt:
        type: string
      id:
        type: string
      message:
        type: string
      replyToId:
        type: string
      tripId:
        type: string
      userId:
        type: string
    type: object
  types.ChatUpdateReadStatusRequest:
    properties:
      lastReadMessageId:
        type: string
    required:
    - lastReadMessageId
    type: object
  types.Coordinates:
    properties:
      lat:
        type: number
      lng:
        type: number
    type: object
  types.CreateTripRequest:
    description: Trip creation information
    properties:
      description:
        example: A relaxing trip to the beach
        type: string
      destination:
        $ref: '#/definitions/types.DestinationInfo'
      endDate:
        example: "2024-07-10T00:00:00Z"
        type: string
      name:
        example: Summer Vacation
        type: string
      startDate:
        example: "2024-07-01T00:00:00Z"
        type: string
      status:
        example: PLANNING
        type: string
    required:
    - destination
    - endDate
    - name
    - startDate
    type: object
  types.DeregisterPushTokenRequest:
    properties:
      token:
        type: string
    required:
    - token
    type: object
  types.DestinationInfo:
    description: Destination information
    properties:
      address:
        example: Paris, France
        type: string
      coordinates:
        $ref: '#/definitions/types.Coordinates'
      placeId:
        example: ChIJD7fiBh9u5kcRYJSMaMOCCwQ
        type: string
    type: object
  types.DeviceType:
    enum:
    - ios
    - android
    type: string
    x-enum-varnames:
    - DeviceTypeIOS
    - DeviceTypeAndroid
  types.ErrorResponse:
    properties:
      code:
        type: string
      error:
        type: string
      message:
        type: string
    type: object
  types.HealthCheck:
    properties:
      components:
        additionalProperties:
          $ref: '#/definitions/types.HealthComponent'
        type: object
      status:
        $ref: '#/definitions/types.HealthStatus'
      timestamp:
        type: string
      uptime:
        type: string
      version:
        type: string
    type: object
  types.HealthComponent:
    properties:
      details:
        type: string
      status:
        $ref: '#/definitions/types.HealthStatus'
    type: object
  types.HealthStatus:
    enum:
    - UP
    - DOWN
    - DEGRADED
    type: string
    x-enum-varnames:
    - HealthStatusUp
    - HealthStatusDown
    - HealthStatusDegraded
  types.ImageResponse:
    description: Image details
    properties:
      id:
        example: image-uuid-123
        type: string
      uploadedAt:
        example: "2023-01-01T12:00:00Z"
        type: string
      url:
        example: https://example.com/image.jpg
        type: string
    type: object
  types.ImageUploadResponse:
    description: Response after successful image upload
    properties:
      id:
        example: image-uuid-123
        type: string
      url:
        example: https://example.com/image.jpg
        type: string
    type: object
  types.InvitationDetailsResponse:
    properties:
      createdAt:
        type: string
      email:
        description: Represents InviteeEmail
        type: string
      expiresAt:
        type: string
      id:
        type: string
      inviter:
        allOf:
        - $ref: '#/definitions/types.UserResponse'
        description: Assumes UserResponse is defined
      memberCount:
        type: integer
      role:
        $ref: '#/definitions/types.MemberRole'
      status:
        $ref: '#/definitions/types.InvitationStatus'
      trip:
        allOf:
        - $ref: '#/definitions/types.TripBasicInfo'
        description: Assumes TripBasicInfo will be defined
      tripId:
        type: string
    type: object
  types.InvitationStatus:
    enum:
    - PENDING
    - ACCEPTED
    - DECLINED
    type: string
    x-enum-varnames:
    - InvitationStatusPending
    - InvitationStatusAccepted
    - InvitationStatusDeclined
  types.LocationPagination:
    properties:
      has_more:
        type: boolean
      limit:
        type: integer
      offset:
        type: integer
      total:
        type: integer
    type: object
  types.LocationPrivacy:
    enum:
    - hidden
    - approximate
    - precise
    type: string
    x-enum-varnames:
    - LocationPrivacyHidden
    - LocationPrivacyApproximate
    - LocationPrivacyPrecise
  types.LocationResponse:
    properties:
      accuracy:
        example: 10.5
        type: number
      created_at:
        example: "2026-02-14T12:00:00Z"
        type: string
      id:
        example: user123_trip456_20260214
        type: string
      latitude:
        example: 40.7128
        type: number
      longitude:
        example: -74.006
        type: number
      privacy_level:
        example: approximate
        type: string
      timestamp:
        example: "2026-02-14T12:00:00Z"
        type: string
      trip_id:
        example: trip-uuid-456
        type: string
      updated_at:
        example: "2026-02-14T12:00:00Z"
        type: string
      user_id:
        example: user-uuid-123
        type: string
    type: object
  types.LocationUpdate:
    properties:
      accuracy:
        type: number
      isSharingEnabled:
        type: boolean
      latitude:
        type: number
      longitude:
        type: number
      privacy:
        $ref: '#/definitions/types.LocationPrivacy'
      sharingExpiresIn:
        description: Duration in seconds for how long to share location
        type: integer
      timestamp:
        description: Unix timestamp in milliseconds
        type: integer
    required:
    - accuracy
    - latitude
    - longitude
    - timestamp
    type: object
  types.LocationsResponse:
    properties:
      locations:
        items:
          $ref: '#/definitions/types.MemberLocation'
        type: array
      pagination:
        $ref: '#/definitions/types.LocationPagination'
    type: object
  types.MemberLocation:
    properties:
      accuracy:
        type: number
      createdAt:
        type: string
      id:
        type: string
      isSharingEnabled:
        type: boolean
      latitude:
        type: number
      longitude:
        type: number
      privacy:
        $ref: '#/definitions/types.LocationPrivacy'
      sharingExpiresAt:
        type: string
      timestamp:
        type: string
      tripId:
        type: string
      updatedAt:
        type: string
      userId:
        type: string
      userName:
        type: string
      userRole:
        type: string
    type: object
  types.MemberRole:
    enum:
    - OWNER
    - MEMBER
    - ADMIN
    type: string
    x-enum-varnames:
    - MemberRoleOwner
    - MemberRoleMember
    - MemberRoleAdmin
  types.MembershipStatus:
    enum:
    - ACTIVE
    - INACTIVE
    type: string
    x-enum-varnames:
    - MembershipStatusActive
    - MembershipStatusInactive
  types.NotificationResponse:
    description: Notification information
    properties:
      createdAt:
        example: "2023-01-01T00:00:00Z"
        type: string
      id:
        example: a1b2c3d4-e5f6-7890-abcd-ef1234567890
        type: string
      message:
        example: You've been invited to join a trip to Paris
        type: string
      metadata:
        items:
          type: integer
        type: array
      read:
        example: false
        type: boolean
      title:
        example: New Trip Invitation
        type: string
      type:
        example: TRIP_INVITATION
        type: string
      userId:
        example: a1b2c3d4-e5f6-7890-abcd-ef1234567890
        type: string
    type: object
  types.PushToken:
    properties:
      createdAt:
        type: string
      deviceType:
        $ref: '#/definitions/types.DeviceType'
      id:
        type: string
      isActive:
        type: boolean
      lastUsedAt:
        type: string
      token:
        type: string
      updatedAt:
        type: string
      userId:
        type: string
    type: object
  types.RegisterPushTokenRequest:
    properties:
      deviceType:
        enum:
        - ios
        - android
        type: string
      token:
        type: string
    required:
    - deviceType
    - token
    type: object
  types.StatusResponse:
    properties:
      status:
        example: success
        type: string
    type: object
  types.TodoCreateRequest:
    description: Request body for creating a new todo. TripID is taken from the path.
    properties:
      text:
        example: Buy groceries
        type: string
    required:
    - text
    type: object
  types.TodoResponse:
    description: Detailed information about a todo item.
    properties:
      createdAt:
        example: "2023-10-26T10:00:00Z"
        type: string
      createdBy:
        example: user-uuid-789
        type: string
      id:
        example: todo-uuid-123
        type: string
      status:
        example: INCOMPLETE
        type: string
      text:
        example: Buy groceries
        type: string
      tripId:
        example: trip-uuid-456
        type: string
      updatedAt:
        example: "2023-10-26T10:05:00Z"
        type: string
    type: object
  types.TodoUpdateRequest:
    description: Fields for updating a todo. All fields are optional.
    properties:
      status:
        example: COMPLETE
        type: string
      text:
        example: Buy milk and eggs
        type: string
    type: object
  types.TripBasicInfo:
    properties:
      description:
        type: string
      endDate:
        type: string
      id:
        type: string
      name:
        type: string
      startDate:
        type: string
    type: object
  types.TripInvitation:
    properties:
      createdAt:
        type: string
      expiresAt:
        type: string
      id:
        type: string
      inviteeEmail:
        type: string
      inviteeId:
        description: Optional, may be nil if user not in system yet
        type: string
      inviterId:
        type: string
      role:
        $ref: '#/definitions/types.MemberRole'
      status:
        $ref: '#/definitions/types.InvitationStatus'
      token:
        description: Changed to sql.NullString
        type: string
      tripId:
        type: string
      updatedAt:
        type: string
    type: object
  types.TripMemberDetailResponse:
    description: Detailed information about a trip member, including their membership
      details and user profile.
    properties:
      membership:
        $ref: '#/definitions/types.TripMemberResponse'
      user:
        $ref: '#/definitions/types.UserResponse'
    type: object
  types.TripMemberResponse:
    description: Detailed information about a trip member
    properties:
      createdAt:
        example: "2023-01-01T10:00:00Z"
        type: string
      id:
        example: membership-uuid-123
        type: string
      role:
        example: MEMBER
        type: string
      status:
        example: ACTIVE
        type: string
      tripId:
        example: trip-uuid-456
        type: string
      updatedAt:
        example: "2023-01-01T11:00:00Z"
        type: string
      userId:
        example: user-uuid-789
        type: string
    type: object
  types.TripMembership:
    properties:
      createdAt:
        type: string
      deletedAt:
        description: Added for soft delete
        type: string
      id:
        type: string
      role:
        $ref: '#/definitions/types.MemberRole'
      status:
        $ref: '#/definitions/types.MembershipStatus'
      tripId:
        type: string
      updatedAt:
        type: string
      userId:
        type: string
    type: object
  types.TripResponse:
    description: Trip information
    properties:
      backgroundImageUrl:
        example: https://example.com/images/paris.jpg
        type: string
      createdAt:
        example: "2023-01-01T00:00:00Z"
        type: string
      createdBy:
        example: a1b2c3d4-e5f6-7890-abcd-ef1234567890
        type: string
      description:
        example: A wonderful week in Paris
        type: string
      destination:
        $ref: '#/definitions/types.DestinationInfo'
      endDate:
        example: "2023-06-07T00:00:00Z"
        type: string
      id:
        example: a1b2c3d4-e5f6-7890-abcd-ef1234567890
        type: string
      name:
        example: Trip to Paris
        type: string
      startDate:
        example: "2023-06-01T00:00:00Z"
        type: string
      status:
        example: PLANNING
        type: string
      updatedAt:
        example: "2023-01-02T00:00:00Z"
        type: string
    type: object
  types.TripSearchRequest:
    description: Criteria for searching trips. All fields are optional.
    properties:
      destination:
        example: Paris
        type: string
      endDate:
        example: "2024-08-10T00:00:00Z"
        type: string
      limit:
        example: 20
        type: integer
      offset:
        example: 0
        type: integer
      startDate:
        example: "2024-08-01T00:00:00Z"
        type: string
      startDateFrom:
        example: "2024-08-01T00:00:00Z"
        type: string
      startDateTo:
        example: "2024-08-31T00:00:00Z"
        type: string
      userId:
        example: user-uuid-123
        type: string
    type: object
  types.TripUpdateRequest:
    description: Updatable trip fields. All fields are optional.
    properties:
      description:
        example: An even more relaxing trip
        type: string
      destination:
        $ref: '#/definitions/types.DestinationInfo'
      endDate:
        example: "2024-07-11T00:00:00Z"
        type: string
      name:
        example: Updated Summer Vacation
        type: string
      startDate:
        example: "2024-07-02T00:00:00Z"
        type: string
      status:
        example: PLANNING
        type: string
    type: object
  types.TripWithMembersResponse:
    description: Detailed trip information along with a list of its members
    properties:
      members:
        items:
          $ref: '#/definitions/types.TripMemberResponse'
        type: array
      trip:
        $ref: '#/definitions/types.TripResponse'
    type: object
  types.UpdateContactEmailRequest:
    properties:
      email:
        type: string
    required:
    - email
    type: object
  types.UpdateMemberRoleRequest:
    description: Request body for updating a trip member's role.
    properties:
      role:
        example: ADMIN
        type: string
    required:
    - role
    type: object
  types.UpdateTripStatusRequest:
    description: Request body for updating trip status
    properties:
      status:
        example: ACTIVE
        type: string
    required:
    - status
    type: object
  types.UserListResponse:
    description: A paginated list of user profiles.
    properties:
      limit:
        example: 20
        type: integer
      offset:
        example: 0
        type: integer
      total:
        example: 100
        type: integer
      users:
        items:
          $ref: '#/definitions/types.UserProfile'
        type: array
    type: object
  types.UserPreferencesRequest:
    additionalProperties: true
    description: A map of preference keys to their values.
    type: object
  types.UserProfile:
    properties:
      avatarUrl:
        type: string
      displayName:
        type: string
      email:
        type: string
      firstName:
        type: string
      id:
        type: string
      isOnline:
        type: boolean
      lastName:
        type: string
      lastSeenAt:
        type: string
      username:
        type: string
    type: object
  types.UserResponse:
    properties:
      avatarUrl:
        description: Changed from ProfilePicture to match Supabase
        type: string
      displayName:
        description: Added for UI display purposes
        type: string
      email:
        type: string
      firstName:
        type: string
      id:
        type: string
      lastName:
        type: string
      username:
        type: string
    type: object
  types.UserSearchResponse:
    properties:
      users:
        items:
          $ref: '#/definitions/types.UserSearchResult'
        type: array
    type: object
  types.UserSearchResult:
    properties:
      avatarUrl:
        type: string
      contactEmail:
        type: string
      email:
        type: string
      firstName:
        type: string
      id:
        type: string
      isMember:
        description: Whether user is already a member of the trip (when tripId provided)
        type: boolean
      lastName:
        type: string
      username:
        type: string
    type: object
  types.UserUpdateRequest:
    properties:
      firstName:
        type: string
      lastName:
        type: string
      profilePictureUrl:
        type: string
      username:
        type: string
    type: object
host: api.nomadcrew.uk
info:
  contact:
    email: support@nomadcrew.uk
    name: NomadCrew Team
    url: https://nomadcrew.uk
  description: NomadCrew RESTful API with authentication and WebSocket support
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
  title: NomadCrew Backend API
  version: 1.0.0
paths:
  /api/v1/location/update:
    post:
      consumes:
      - application/json
      description: Updates the current user's location globally (legacy compatibility)
      parameters:
      - description: Location data
        in: body
        name: location
        required: true
        schema:
          $ref: '#/definitions/types.LocationUpdate'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/types.LocationResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      summary: Update user's location (legacy endpoint)
      tags:
      - locations
  /api/v1/trips/{tripId}/chat/messages:
    get:
      description: Retrieves messages from a trip chat with pagination
      parameters:
      - description: Trip ID
        in: path
        name: tripId
        required: true
        type: string
      - default: 50
        description: Maximum number of messages to return
        in: query
        name: limit
        type: integer
      - description: Return messages before this message ID (for pagination)
        in: query
        name: before
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/types.ChatGetMessagesResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      summary: Get chat messages
      tags:
      - chat
    post:
      consumes:
      - application/json
      description: Sends a new message to a trip chat
      parameters:
      - description: Trip ID
        in: path
        name: tripId
        required: true
        type: string
      - description: Message data
        in: body
        name: message
        required: true
        schema:
          $ref: '#/definitions/types.ChatSendMessageRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/types.ChatSendMessageResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      summary: Send a chat message
      tags:
      - chat
  /api/v1/trips/{tripId}/chat/messages/{messageId}/reactions:
    post:
      consumes:
      - application/json
      description: Adds an emoji reaction to a chat message
      parameters:
      - description: Trip ID
        in: path
        name: tripId
        required: true
        type: string
      - description: Message ID
        in: path
        name: messageId
        required: true
        type: string
      - description: Reaction data
        in: body
        name: reaction
        required: true
        schema:
          $ref: '#/definitions/types.ChatAddReactionRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/types.ChatReactionResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      summary: Add a reaction
      tags:
      - chat
  /api/v1/trips/{tripId}/chat/messages/{messageId}/reactions/{emoji}:
    delete:
      description: Removes an emoji reaction from a chat message
      parameters:
      - description: Trip ID
        in: path
        name: tripId
        required: true
        type: string
      - description: Message ID
        in: path
        name: messageId
        required: true
        type: string
      - description: Emoji to remove
        in: path
        name: emoji
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/types.StatusResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      summary: Remove a reaction
      tags:
      - chat
  /api/v1/trips/{tripId}/chat/read-status:
    put:
      consumes:
      - application/json
      description: Updates the user's last read message for a trip
      parameters:
      - description: Trip ID
        in: path
        name: tripId
        required: true
        type: string
      - description: Read status data
        in: body
        name: status
        required: true
        schema:
          $ref: '#/definitions/types.ChatUpdateReadStatusRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/types.StatusResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      summary: Update read status
      tags:
      - chat
  /api/v1/trips/{tripId}/locations:
    get:
      description: Retrieves the latest locations of all trip members
      parameters:
      - description: Trip ID
        in: path
        name: tripId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/types.LocationsResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      summary: Get trip member locations
      tags:
      - locations
    post:
      consumes:
      - application/json
      description: Posts the current user's location for a specific trip
      parameters:
      - description: Trip ID
        in: path
        name: tripId
        required: true
        type: string
      - description: Location data
        in: body
        name: location
        required: true
        schema:
          $ref: '#/definitions/types.LocationUpdate'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/types.LocationResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      summary: Create/Post user's location
      tags:
      - locations
    put:
      consumes:
      - application/json
      description: Updates the current user's location for a specific trip
      parameters:
      - description: Trip ID
        in: path
        name: tripId
        required: true
        type: string
      - description: Location update data
        in: body
        name: location
        required: true
        schema:
          $ref: '#/definitions/types.LocationUpdate'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/types.StatusResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      summary: Update user's location
      tags:
      - locations
  /health:
    get:
      description: Provides detailed health information about all service dependencies
      produces:
      - application/json
      responses:
        "200":
          description: Detailed health information
          schema:
            $ref: '#/definitions/types.HealthCheck'
      summary: Detailed health check
      tags:
      - health
  /health/liveness:
    get:
      description: Simple endpoint that returns 200 OK if the service is running
      produces:
      - application/json
      responses:
        "200":
          description: Service is alive
      summary: Kubernetes liveness probe
      tags:
      - health
  /health/readiness:
    get:
      description: Checks if the service is ready to accept requests (DB and Redis
        connections working)
      produces:
      - application/json
      responses:
        "200":
          description: Service is ready
          schema:
            $ref: '#/definitions/types.HealthCheck'
        "503":
          description: Service is not ready
          schema:
            $ref: '#/definitions/types.HealthCheck'
      summary: Kubernetes readiness probe
      tags:
      - health
  /invitations/{invitationId}:
    get:
      description: Retrieves details about an invitation using its ID. The authenticated
        user must be the invitee (email match required).
      parameters:
      - description: Invitation ID (UUID)
        in: path
        name: invitationId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Invitation details
          schema:
            $ref: '#/definitions/types.InvitationDetailsResponse'
        "400":
          description: Bad request - Missing invitation ID
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "401":
          description: Unauthorized - User not authenticated
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "403":
          description: Forbidden - User is not the invitee
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "404":
          description: Not found - Invitation not found
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get invitation details by ID
      tags:
      - trips-invitations
  /invitations/{invitationId}/accept:
    post:
      description: Allows an authenticated user to accept an invitation using the
        invitation ID. The user must be the invitee.
      parameters:
      - description: Invitation ID (UUID)
        in: path
        name: invitationId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Successfully joined trip
          schema:
            $ref: '#/definitions/types.TripMembership'
        "400":
          description: Bad request - Invalid invitation ID
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "401":
          description: Unauthorized - User not authenticated
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "403":
          description: Forbidden - User is not the invitee
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "404":
          description: Not found - Invitation not found
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "409":
          description: Conflict - Already a member or invitation not pending
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Accept a trip invitation by ID
      tags:
      - trips-invitations
  /invitations/{invitationId}/decline:
    post:
      description: Allows an authenticated user to decline an invitation using the
        invitation ID. The user must be the invitee.
      parameters:
      - description: Invitation ID (UUID)
        in: path
        name: invitationId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "204":
          description: Successfully declined invitation
        "400":
          description: Bad request - Invalid invitation ID
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "401":
          description: Unauthorized - User not authenticated
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "403":
          description: Forbidden - User is not the invitee
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "404":
          description: Not found - Invitation not found
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "409":
          description: Conflict - Invitation not pending
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Decline a trip invitation by ID
      tags:
      - trips-invitations
  /invitations/accept:
    post:
      consumes:
      - application/json
      description: Allows a user to accept an invitation to join a trip using a token.
      parameters:
      - description: Invitation token
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handlers.AcceptInvitationRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Successfully joined trip
          schema:
            $ref: '#/definitions/types.TripMembership'
        "400":
          description: Bad request - Invalid or expired token
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "401":
          description: Unauthorized - User ID in token does not match logged-in user
            (if applicable)
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "404":
          description: Not found - Invitation not found or already processed
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth // User must be logged in to accept: []
      summary: Accept a trip invitation
      tags:
      - trips-invitations
  /invitations/decline:
    post:
      consumes:
      - application/json
      description: Allows a user to decline an invitation to join a trip using a token.
      parameters:
      - description: Invitation token
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handlers.DeclineInvitationRequest'
      produces:
      - application/json
      responses:
        "204":
          description: Successfully declined invitation
        "400":
          description: Bad request - Invalid or expired token
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "401":
          description: Unauthorized - User not authenticated or token mismatch
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "404":
          description: Not found - Invitation not found or already processed
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth // User must be logged in to decline: []
      summary: Decline a trip invitation
      tags:
      - trips-invitations
  /invitations/details:
    get:
      consumes:
      - application/json
      description: Retrieves details about an invitation, such as the trip name and
        inviter, using the invitation token. Useful for UIs before acceptance.
      parameters:
      - description: Invitation Token
        in: query
        name: token
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Details of the invitation
          schema:
            $ref: '#/definitions/types.InvitationDetailsResponse'
        "400":
          description: Bad request - Missing or invalid token
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "404":
          description: Not found - Invitation not found or token invalid
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      summary: Get details of a specific invitation using a token
      tags:
      - trips-invitations
  /invitations/join:
    get:
      consumes:
      - application/json
      description: Validates an invitation token from a deep link and redirects the
        user or provides invitation details.
      parameters:
      - description: Invitation token
        in: query
        name: token
        required: true
        type: string
      produces:
      - application/json
      responses:
        "302":
          description: Redirects to frontend with token or error
        "400":
          description: Bad request - Invalid or expired token
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "404":
          description: Not found - Invitation not found
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      summary: Handle a deep link for a trip invitation
      tags:
      - trips-invitations
  /notifications:
    delete:
      description: Deletes all notifications for the authenticated user
      produces:
      - application/json
      responses:
        "200":
          description: Returns the number of notifications deleted
          schema:
            additionalProperties:
              type: integer
            type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Delete all notifications
      tags:
      - notifications
    get:
      description: Retrieves notifications for the authenticated user with pagination
        and filtering
      parameters:
      - description: Number of notifications to return (default 20, max 100)
        in: query
        name: limit
        type: integer
      - description: Offset for pagination (default 0)
        in: query
        name: offset
        type: integer
      - description: Filter by status ('read' or 'unread')
        in: query
        name: status
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/types.NotificationResponse'
            type: array
        "400":
          description: Invalid query parameters
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get user notifications
      tags:
      - notifications
  /notifications/{notificationId}:
    delete:
      description: Deletes a specific notification for the authenticated user
      parameters:
      - description: Notification ID (UUID)
        in: path
        name: notificationId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "400":
          description: Invalid Notification ID
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "403":
          description: Forbidden (Notification does not belong to user)
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "404":
          description: Notification Not Found
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Delete a notification
      tags:
      - notifications
  /notifications/{notificationId}/read:
    patch:
      consumes:
      - application/json
      description: Marks a specific notification as read for the authenticated user
      parameters:
      - description: Notification ID (UUID)
        in: path
        name: notificationId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "204":
          description: No Content
        "400":
          description: Invalid Notification ID
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "403":
          description: Forbidden (Notification does not belong to user)
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "404":
          description: Notification Not Found
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Mark a notification as read
      tags:
      - notifications
  /notifications/read-all:
    patch:
      consumes:
      - application/json
      description: Marks all unread notifications as read for the authenticated user
      produces:
      - application/json
      responses:
        "200":
          description: Returns the number of notifications marked as read
          schema:
            additionalProperties:
              type: integer
            type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Mark all notifications as read
      tags:
      - notifications
  /trips:
    get:
      consumes:
      - application/json
      description: Retrieves all trips that the current user is a member of
      produces:
      - application/json
      responses:
        "200":
          description: List of user's trips
          schema:
            items:
              $ref: '#/definitions/types.TripResponse'
            type: array
        "401":
          description: Unauthorized - User not logged in
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: List user trips
      tags:
      - trips
    post:
      consumes:
      - application/json
      description: Creates a new trip with the given details
      parameters:
      - description: Trip creation details
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/types.CreateTripRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Successfully created trip details
          schema:
            $ref: '#/definitions/types.TripResponse'
        "400":
          description: Bad request - Invalid input data
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "401":
          description: Unauthorized - User not logged in
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Create a new trip
      tags:
      - trips
  /trips/{id}:
    delete:
      consumes:
      - application/json
      description: Deletes a specific trip by its ID.
      parameters:
      - description: Trip ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "204":
          description: Successfully deleted
        "400":
          description: Bad request - Invalid trip ID format
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "401":
          description: Unauthorized - User not logged in
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "403":
          description: Forbidden - User not authorized to delete this trip
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "404":
          description: Not found - Trip not found
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Delete a trip
      tags:
      - trips
    get:
      consumes:
      - application/json
      description: Retrieves detailed information about a specific trip
      parameters:
      - description: Trip ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Trip details
          schema:
            $ref: '#/definitions/types.TripResponse'
        "400":
          description: Bad request - Invalid trip ID
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "401":
          description: Unauthorized - User not logged in
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "403":
          description: Forbidden - User not a member of this trip
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "404":
          description: Not found - Trip not found
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get trip details
      tags:
      - trips
    put:
      consumes:
      - application/json
      description: Updates specified fields of an existing trip. All fields in the
        request body are optional.
      parameters:
      - description: Trip ID
        in: path
        name: id
        required: true
        type: string
      - description: Fields to update
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/types.TripUpdateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Successfully updated trip details
          schema:
            $ref: '#/definitions/types.TripResponse'
        "400":
          description: Bad request - Invalid trip ID or update data
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "401":
          description: Unauthorized - User not logged in
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "403":
          description: Forbidden - User not authorized to update this trip
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "404":
          description: Not found - Trip not found
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update trip details
      tags:
      - trips
  /trips/{id}/details:
    get:
      consumes:
      - application/json
      description: Retrieves a trip's details along with its list of members.
      parameters:
      - description: Trip ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Trip details including members
          schema:
            $ref: '#/definitions/types.TripWithMembersResponse'
        "400":
          description: Bad request - Invalid trip ID
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "401":
          description: Unauthorized - User not logged in
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "403":
          description: Forbidden - User not authorized to view this trip
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "404":
          description: Not found - Trip not found
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get trip with members
      tags:
      - trips
  /trips/{id}/images:
    get:
      consumes:
      - application/json
      description: Retrieves a list of images associated with a specific trip.
      parameters:
      - description: Trip ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: List of trip images
          schema:
            items:
              $ref: '#/definitions/types.ImageResponse'
            type: array
        "401":
          description: Unauthorized - User not logged in
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "403":
          description: Forbidden - User not authorized to view images for this trip
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "404":
          description: Not found - Trip not found
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: List trip images
      tags:
      - trips
      - images
    post:
      consumes:
      - multipart/form-data
      description: Uploads an image for a specific trip.
      parameters:
      - description: Trip ID
        in: path
        name: id
        required: true
        type: string
      - description: Image file to upload
        in: formData
        name: image
        required: true
        type: file
      produces:
      - application/json
      responses:
        "201":
          description: Image uploaded successfully
          schema:
            $ref: '#/definitions/types.ImageUploadResponse'
        "400":
          description: Bad request - No file, invalid file type/size, or invalid trip
            ID
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "401":
          description: Unauthorized - User not logged in
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "403":
          description: Forbidden - User not authorized to upload images for this trip
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "404":
          description: Not found - Trip not found
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error - Upload failed
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Upload a trip image
      tags:
      - trips
      - images
  /trips/{id}/images/{imageId}:
    delete:
      consumes:
      - application/json
      description: Deletes a specific image associated with a trip.
      parameters:
      - description: Trip ID
        in: path
        name: id
        required: true
        type: string
      - description: Image ID to delete
        in: path
        name: imageId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "204":
          description: Image deleted successfully
        "401":
          description: Unauthorized - User not logged in
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "403":
          description: Forbidden - User not authorized to delete this image
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "404":
          description: Not found - Trip or image not found
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Delete a trip image
      tags:
      - trips
      - images
  /trips/{id}/status:
    patch:
      consumes:
      - application/json
      description: Updates the status of a specific trip (e.g., PLANNING, ACTIVE,
        COMPLETED, CANCELLED).
      parameters:
      - description: Trip ID
        in: path
        name: id
        required: true
        type: string
      - description: New status for the trip
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/types.UpdateTripStatusRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Successfully updated trip status
          schema:
            $ref: '#/definitions/types.TripResponse'
        "400":
          description: Bad request - Invalid trip ID or status value
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "401":
          description: Unauthorized - User not logged in
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "403":
          description: Forbidden - User not authorized to update this trip's status,
            or invalid status transition
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "404":
          description: Not found - Trip not found
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update trip status
      tags:
      - trips
  /trips/{id}/todos:
    get:
      consumes:
      - application/json
      description: Retrieves a list of todo items associated with the specified trip,
        with pagination.
      parameters:
      - description: Trip ID
        in: path
        name: id
        required: true
        type: string
      - description: Number of items to return (default 100)
        in: query
        name: limit
        type: integer
      - description: Offset for pagination (default 0)
        in: query
        name: offset
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: List of todo items
          schema:
            items:
              $ref: '#/definitions/types.TodoResponse'
            type: array
        "400":
          description: Bad request - Invalid Trip ID or pagination parameters
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "401":
          description: Unauthorized - User not logged in
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "403":
          description: Forbidden - User not authorized to view todos for this trip
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: List todo items for a trip
      tags:
      - todos
    post:
      consumes:
      - application/json
      description: Creates a new todo item associated with the specified trip.
      parameters:
      - description: Trip ID
        in: path
        name: id
        required: true
        type: string
      - description: Todo details
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/types.TodoCreateRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Successfully created todo item
          schema:
            $ref: '#/definitions/types.TodoResponse'
        "400":
          description: Bad request - Invalid input data or missing Trip ID
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "401":
          description: Unauthorized - User not logged in
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "403":
          description: Forbidden - User not authorized to create todos for this trip
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Create a new todo item for a trip
      tags:
      - todos
  /trips/{id}/todos/{todoID}:
    delete:
      consumes:
      - application/json
      description: Deletes a specific todo item.
      parameters:
      - description: Trip ID
        in: path
        name: id
        required: true
        type: string
      - description: Todo ID to delete
        in: path
        name: todoID
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Todo item deleted successfully
          schema:
            $ref: '#/definitions/types.StatusResponse'
        "400":
          description: Bad request - Invalid IDs
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "401":
          description: Unauthorized - User not logged in
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "403":
          description: Forbidden - User not authorized to delete this todo
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "404":
          description: Not found - Todo item not found
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Delete a todo item
      tags:
      - todos
    get:
      consumes:
      - application/json
      description: Retrieves details for a specific todo item.
      parameters:
      - description: Trip ID
        in: path
        name: id
        required: true
        type: string
      - description: Todo ID to retrieve
        in: path
        name: todoID
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Details of the todo item
          schema:
            $ref: '#/definitions/types.TodoResponse'
        "400":
          description: Bad request - Invalid IDs
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "401":
          description: Unauthorized - User not logged in
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "403":
          description: Forbidden - User not authorized to view this todo
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "404":
          description: Not found - Todo item not found
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get a specific todo item
      tags:
      - todos
    put:
      consumes:
      - application/json
      description: Updates the text and/or status of an existing todo item.
      parameters:
      - description: Trip ID
        in: path
        name: id
        required: true
        type: string
      - description: Todo ID to update
        in: path
        name: todoID
        required: true
        type: string
      - description: Fields to update
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/types.TodoUpdateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Successfully updated todo item
          schema:
            $ref: '#/definitions/types.TodoResponse'
        "400":
          description: Bad request - Invalid input data or IDs
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "401":
          description: Unauthorized - User not logged in
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "403":
          description: Forbidden - User not authorized to update this todo
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "404":
          description: Not found - Todo item not found
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update an existing todo item
      tags:
      - todos
  /trips/{id}/weather/trigger:
    post:
      consumes:
      - application/json
      description: Manually triggers an immediate weather forecast update for the
        specified trip if it has a valid destination.
      parameters:
      - description: Trip ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Successfully triggered weather update
          schema:
            $ref: '#/definitions/types.StatusResponse'
        "400":
          description: Bad request - Invalid trip ID
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "401":
          description: Unauthorized - User not logged in
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "403":
          description: Forbidden - User not authorized or trip has no destination
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "404":
          description: Not found - Trip not found
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error or weather service error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Trigger weather update for a trip
      tags:
      - trips
      - weather
  /trips/{tripId}/invitations:
    get:
      description: Retrieves all invitations for a specific trip. Requires ADMIN+
        permissions.
      parameters:
      - description: Trip ID
        in: path
        name: tripId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: List of invitations
          schema:
            items:
              $ref: '#/definitions/types.TripInvitation'
            type: array
        "401":
          description: Unauthorized - User not authenticated
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "403":
          description: Forbidden - Insufficient permissions
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "404":
          description: Not found - Trip not found
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: List all invitations for a trip
      tags:
      - trips-invitations
    post:
      consumes:
      - application/json
      description: Invites a user by email to join a specific trip with a given role.
      parameters:
      - description: Trip ID
        in: path
        name: tripId
        required: true
        type: string
      - description: Invitation details (email, role)
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handlers.InviteMemberRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Successfully created invitation
          schema:
            $ref: '#/definitions/types.TripInvitation'
        "400":
          description: Bad request - Invalid input or user already member/invited
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "401":
          description: Unauthorized - User not logged in
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "403":
          description: Forbidden - User does not have permission to invite
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "404":
          description: Not found - Trip not found
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Invite a user to a trip
      tags:
      - trips-invitations
  /trips/{tripId}/invitations/{invitationId}:
    delete:
      description: Revokes (cancels) a pending invitation. Requires ADMIN+ permissions.
      parameters:
      - description: Trip ID
        in: path
        name: tripId
        required: true
        type: string
      - description: Invitation ID (UUID)
        in: path
        name: invitationId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "204":
          description: Successfully revoked invitation
        "400":
          description: Bad request - Invitation not pending
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "401":
          description: Unauthorized - User not authenticated
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "403":
          description: Forbidden - Insufficient permissions
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "404":
          description: Not found - Invitation not found
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Revoke a trip invitation
      tags:
      - trips-invitations
  /trips/{tripId}/members:
    get:
      consumes:
      - application/json
      description: Retrieves a list of all members for a specific trip, including
        their profile information.
      parameters:
      - description: Trip ID
        in: path
        name: tripId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: List of trip members with profile information
          schema:
            items:
              $ref: '#/definitions/types.TripMemberDetailResponse'
            type: array
        "401":
          description: Unauthorized - User not logged in
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "403":
          description: Forbidden - User is not a member of this trip
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "404":
          description: Not found - Trip not found
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get all members of a trip
      tags:
      - trips-members
    post:
      consumes:
      - application/json
      description: Adds a user as a member to a specific trip with a given role
      parameters:
      - description: Trip ID
        in: path
        name: tripId
        required: true
        type: string
      - description: Member details
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/types.AddMemberRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Successfully added member
          schema:
            $ref: '#/definitions/types.TripMemberResponse'
        "400":
          description: Bad request - Invalid input or user already member
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "401":
          description: Unauthorized - User not logged in
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "403":
          description: Forbidden - User does not have permission to add members
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "404":
          description: Not found - Trip or User not found
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Add a member to a trip
      tags:
      - trips-members
  /trips/{tripId}/members/{userId}:
    delete:
      consumes:
      - application/json
      description: Removes a user from a specific trip
      parameters:
      - description: Trip ID
        in: path
        name: tripId
        required: true
        type: string
      - description: User ID of the member to remove
        in: path
        name: userId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "204":
          description: Successfully removed member
        "401":
          description: Unauthorized - User not logged in
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "403":
          description: Forbidden - User does not have permission to remove members
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "404":
          description: Not found - Trip or User not found
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Remove a member from a trip
      tags:
      - trips-members
  /trips/{tripId}/members/{userId}/role:
    put:
      consumes:
      - application/json
      description: Updates the role of an existing member in a specific trip
      parameters:
      - description: Trip ID
        in: path
        name: tripId
        required: true
        type: string
      - description: User ID of the member to update
        in: path
        name: userId
        required: true
        type: string
      - description: New role
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/types.UpdateMemberRoleRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Successfully updated member's role
          schema:
            $ref: '#/definitions/types.TripMemberResponse'
        "400":
          description: Bad request - Invalid input
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "401":
          description: Unauthorized - User not logged in
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "403":
          description: Forbidden - User does not have permission to update roles
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "404":
          description: Not found - Trip, User, or Membership not found
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update a trip member's role
      tags:
      - trips-members
  /trips/search:
    post:
      consumes:
      - application/json
      description: Searches for trips based on specified criteria in the request body.
        All criteria are optional.
      parameters:
      - description: Search criteria
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/types.TripSearchRequest'
      produces:
      - application/json
      responses:
        "200":
          description: A list of trips matching the criteria
          schema:
            items:
              $ref: '#/definitions/types.TripResponse'
            type: array
        "400":
          description: Bad request - Invalid search criteria
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "401":
          description: Unauthorized - User not logged in
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Search for trips
      tags:
      - trips
  /users:
    get:
      consumes:
      - application/json
      description: Retrieves a paginated list of users
      parameters:
      - description: Pagination offset (default 0)
        in: query
        name: offset
        type: integer
      - description: Pagination limit (default 20, max 100)
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: List of users with pagination info
          schema:
            $ref: '#/definitions/types.UserListResponse'
        "400":
          description: Bad request - Invalid pagination parameters
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: List users
      tags:
      - user
  /users/{id}:
    get:
      consumes:
      - application/json
      description: Retrieves a user profile by user ID
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: User profile
          schema:
            $ref: '#/definitions/types.UserProfile'
        "400":
          description: Bad request - Invalid user ID format
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "404":
          description: Not found - User not found
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get user by ID
      tags:
      - user
    put:
      consumes:
      - application/json
      description: Updates fields for a specified user. Only admin or the user themselves
        can perform this action.
      parameters:
      - description: User ID to update
        in: path
        name: id
        required: true
        type: string
      - description: User fields to update
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/types.UserUpdateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Successfully updated user profile
          schema:
            $ref: '#/definitions/types.UserProfile'
        "400":
          description: Bad request - Invalid user ID or request body
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "401":
          description: Unauthorized - User not logged in
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "403":
          description: Forbidden - User not authorized to update this profile
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "404":
          description: Not found - User not found
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update user profile
      tags:
      - user
  /users/{id}/preferences:
    put:
      consumes:
      - application/json
      description: Updates the preferences for a specified user. Only admin or the
        user themselves can perform this action.
      parameters:
      - description: User ID whose preferences to update
        in: path
        name: id
        required: true
        type: string
      - description: User preferences map
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/types.UserPreferencesRequest'
      produces:
      - application/json
      responses:
        "204":
          description: Preferences updated successfully
        "400":
          description: Bad request - Invalid user ID or preferences format
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "401":
          description: Unauthorized - User not logged in
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "403":
          description: Forbidden - User not authorized to update these preferences
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "404":
          description: Not found - User not found
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update user preferences
      tags:
      - user
  /users/me:
    get:
      consumes:
      - application/json
      description: Retrieves the profile of the currently authenticated user
      produces:
      - application/json
      responses:
        "200":
          description: User profile
          schema:
            $ref: '#/definitions/types.UserProfile'
        "401":
          description: Unauthorized - No authenticated user
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get current user profile
      tags:
      - user
  /users/me/contact-email:
    put:
      consumes:
      - application/json
      description: Updates the current user's contact email (for Apple Sign-In users
        with private relay emails)
      parameters:
      - description: Contact email
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/types.UpdateContactEmailRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Contact email updated
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad request - Invalid email format
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "401":
          description: Unauthorized - No authenticated user
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update contact email
      tags:
      - user
  /users/onboard:
    post:
      consumes:
      - application/json
      description: Upserts the user into the backend users table using info from the
        Supabase JWT
      produces:
      - application/json
      responses:
        "200":
          description: User profile
          schema:
            $ref: '#/definitions/types.UserProfile'
        "400":
          description: Bad request - Invalid or missing JWT
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "401":
          description: Unauthorized - Invalid token
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Onboard or upsert user from Supabase JWT
      tags:
      - user
  /users/push-token:
    delete:
      consumes:
      - application/json
      description: Deactivates a push notification token for the authenticated user
        (typically on logout)
      parameters:
      - description: Push token deregistration request
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/types.DeregisterPushTokenRequest'
      produces:
      - application/json
      responses:
        "204":
          description: Token deregistered successfully
        "400":
          description: Invalid request body
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Deregister a push notification token
      tags:
      - push-tokens
    post:
      consumes:
      - application/json
      description: Registers or updates a push notification token for the authenticated
        user's device
      parameters:
      - description: Push token registration request
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/types.RegisterPushTokenRequest'
      produces:
      - application/json
      responses:
        "200":
          description: Token registered successfully
          schema:
            $ref: '#/definitions/types.PushToken'
        "400":
          description: Invalid request body
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Register a push notification token
      tags:
      - push-tokens
  /users/push-tokens:
    delete:
      description: Deactivates all push notification tokens for the authenticated
        user (e.g., on account logout from all devices)
      produces:
      - application/json
      responses:
        "204":
          description: All tokens deregistered successfully
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Deregister all push notification tokens
      tags:
      - push-tokens
  /users/search:
    get:
      consumes:
      - application/json
      description: Search for users by username, email, contact_email, first name,
        or last name
      parameters:
      - description: Search query (min 2 characters)
        in: query
        name: q
        required: true
        type: string
      - description: Max results (default 10, max 20)
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: Search results
          schema:
            $ref: '#/definitions/types.UserSearchResponse'
        "400":
          description: Bad request - Invalid query
          schema:
            $ref: '#/definitions/types.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/types.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Search users
      tags:
      - user
securityDefinitions:
  BearerAuth:
    description: JWT token for authentication
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
